require=function e(t,a,n){function o(r,s){if(!a[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(i)return i(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=a[r]={exports:{}};t[r][0].call(l.exports,function(e){var a=t[r][1][e];return o(a||e)},l,l.exports,e,t,a,n)}return a[r].exports}for(var i="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({AudioManager:[function(e,t,a){"use strict";cc._RF.push(t,"28a66ahmItPzI6/5RgTIt5r","AudioManager"),Object.defineProperty(a,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MainBGMName="bgm_1.mp3",t.ScatterBGMName="bgm_4.mp3",t.BGMVolume=1,t.ScatterBGMVolume=1,t.nowBGMName="",t.currentTime=0,t.BGMSwitch=!0,t.SESwitch=!0,t}return __extends(t,e),a=t,t.prototype.onLoad=function(){},t.prototype.start=function(){this.nowBGMName=this.MainBGMName,this.PlayMainBGM(this.nowBGMName)},t.prototype.PlayMainBGM=function(e){a.isMute||(this.StopNowBGM(),this.nowBGM=cc.audioEngine.play(cc.url.raw("resources/Music/"+e),!0,this.BGMVolume),this.MainBGMName=e,this.nowBGMName=e)},t.prototype.PlayScatterBGM=function(){a.isMute||(this.nowBGM=cc.audioEngine.play(cc.url.raw("resources/Music/"+this.ScatterBGMName),!0,this.BGMVolume)),this.nowBGMName=this.ScatterBGMName},t.prototype.StopNowBGM=function(){cc.audioEngine.stop(this.nowBGM)},t.prototype.MuteSwitch=function(){a.isMute?(a.isMute=!1,this.nowBGM=cc.audioEngine.play(cc.url.raw("resources/Music/"+this.nowBGMName),!0,this.BGMVolume),cc.audioEngine.setCurrentTime(this.nowBGM,this.currentTime)):(this.currentTime=cc.audioEngine.getCurrentTime(this.nowBGM),this.BGMSwitch=!1,a.isMute=!0,cc.audioEngine.setVolume(this.nowBGM,0))},t.isMute=!1,__decorate([i],t.prototype,"MainBGMName",void 0),__decorate([i],t.prototype,"ScatterBGMName",void 0),__decorate([i],t.prototype,"BGMVolume",void 0),__decorate([i],t.prototype,"ScatterBGMVolume",void 0),t=a=__decorate([o],t);var a}(cc.Component);a.default=r,cc._RF.pop()},{}],AudioPlayer:[function(e,t,a){"use strict";cc._RF.push(t,"e907aQypp9OP5c8yBiqJIUJ","AudioPlayer"),Object.defineProperty(a,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=n.property,r=e("./AudioManager"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_clip=null,t.mute=!1,t.loop=!1,t.volume=1,t.playOnStart=!1,t.preload=!0,t.name=null,t.audio=null,t}return __extends(t,e),t.prototype.onLoad=function(){if(null==this.m_clip)throw"clip is null";this.preload&&(this.audio=cc.audioEngine.preload(this.m_clip))},t.prototype.start=function(){this.playOnStart&&this.play()},t.prototype.play=function(){this.volume<=0||r.default.isMute||(this.audio=cc.audioEngine.play(this.m_clip,this.loop,this.volume))},t.prototype.stop=function(){cc.audioEngine.stop(this.audio)},t.prototype.pause=function(){cc.audioEngine.pause(this.audio)},t.prototype.resume=function(){this.volume<=0||r.default.isMute||cc.audioEngine.resume(this.audio)},t.prototype.setLoop=function(e){cc.audioEngine.setLoop(this.audio,e)},t.prototype.setVolume=function(e){this.volume=e},__decorate([i(cc.AudioClip)],t.prototype,"m_clip",void 0),__decorate([i],t.prototype,"mute",void 0),__decorate([i],t.prototype,"loop",void 0),__decorate([i],t.prototype,"volume",void 0),__decorate([i],t.prototype,"playOnStart",void 0),__decorate([i],t.prototype,"preload",void 0),t=__decorate([o],t)}(cc.Component);a.default=s,cc._RF.pop()},{"./AudioManager":"AudioManager"}],BrowserManager:[function(e,t,a){"use strict";cc._RF.push(t,"5a81aqbPdJOxrFupC7dJyms","BrowserManager"),Object.defineProperty(a,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),a=t,t.prototype.onLoad=function(){document.onvisibilitychange=a.prototype.OnChange,cc.game.on(cc.game.EVENT_HIDE,function(){cc.game.isPaused||cc.game.pause(),console.log(cc.game.isPaused())}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.game.isPaused&&cc.game.resume(),console.log(cc.game.isPaused())})},t.prototype.OnChange=function(){switch(document.visibilityState){case"hidden":cc.game.isPaused()||cc.game.pause(),console.log(document.visibilityState);break;case"visible":cc.game.isPaused()&&cc.game.resume(),console.log(document.visibilityState);break;case"prerender":case"unloaded":console.log(document.visibilityState)}},t.prototype.OnFocusChange=function(){console.log(document.hasFocus()),document.hasFocus()?cc.game.isPaused&&cc.game.resume():cc.game.isPaused||cc.game.pause()},t=a=__decorate([o],t);var a}(cc.Component));a.default=i,cc._RF.pop()},{}],CandyManager:[function(e,t,a){"use strict";cc._RF.push(t,"6fd37B+kPJAm58QIRmSsPU/","CandyManager"),Object.defineProperty(a,"__esModule",{value:!0});var n,o,i=e("./Candy"),r=e("./State"),s=e("./Topo"),c=e("./Tools/Tools"),u=e("./Audio/AudioPlayer");(o=n||(n={}))[o.M1=0]="M1",o[o.M2=1]="M2",o[o.M3=2]="M3",o[o.M4=3]="M4",o[o.M5=4]="M5",o[o.N1=5]="N1",o[o.N2=6]="N2",o[o.N3=7]="N3",o[o.N4=8]="N4",o[o.N5=9]="N5",o[o.C1=10]="C1",o[o.C2=11]="C2",o[o.C3=12]="C3",o[o.C4=13]="C4",o[o.C5=14]="C5",o[o.P1=15]="P1",o[o.P2=16]="P2",o[o.P3=17]="P3",o[o.Bonus=18]="Bonus";var l=cc._decorator,p=l.ccclass,h=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playManager=null,t.CandyPrefab=null,t.SymbolSprite=new Array,t.targetSymbol=null,t.roundText=new Array,t.levelParent=null,t.Level1PassBlock=null,t.Level2PassBlock=null,t.Level3PassBlock=null,t.PassCountNumber=null,t.a_clear=null,t.a_pass=null,t.TopObjArray=new Array,t.m_Topo=new s.default,t.isFast=!1,t.NowLevel=1,t.passCount=0,t.HideY=300,t.FirstX=-37,t.ObjH=70,t.ObjW=70,t.Buttom=-238,t.Top=263,t.DropTime=.1,t.FastDropTime=.05,t.CandyPool=new Array,t.DropDelay=400,t.Row=0,t.clearIndex=0,t.FakePool=new Array,t.fastMultiple=.5,t}return __extends(t,e),t.prototype.start=function(){cc.sys.isMobile?(this.Top=255,this.ObjH=70,this.ObjW=70):(this.Top=222,this.ObjH=75,this.ObjW=75),this.SetLevel()},t.prototype.LevelSwitch=function(e){var t="";t=e?"LevelShow":"LevelHide",this.levelParent.getComponent(cc.Animation).play(t)},t.prototype.SetLevel=function(){switch(this.NowLevel){case 1:this.passCount=0,this.PassCountNumber.string=this.passCount+"/15",this.Row=4,this.FirstX=-37,this.targetSymbol.spriteFrame=this.SymbolSprite[n.P1],this.Level1PassBlock.children.map(function(e){return e.active=!0}),this.Level2PassBlock.children.map(function(e){return e.active=!0}),this.Level3PassBlock.children.map(function(e){return e.active=!0}),this.roundText[0].node.active=!0,this.roundText[1].node.active=!1,this.roundText[2].node.active=!1,this.playManager.AudioManager.PlayMainBGM("bgm_1.mp3");break;case 2:this.passCount=0,this.PassCountNumber.string=this.passCount+"/15",this.Row=5,this.FirstX=-37,this.targetSymbol.spriteFrame=this.SymbolSprite[n.P2],this.Level2PassBlock.children.map(function(e){return e.active=!0}),this.Level3PassBlock.children.map(function(e){return e.active=!0}),this.roundText[0].node.active=!1,this.roundText[1].node.active=!0,this.roundText[2].node.active=!1,this.playManager.AudioManager.PlayMainBGM("bgm_2.mp3");break;case 3:this.passCount=0,this.PassCountNumber.string=this.passCount+"/15",this.Row=6,this.FirstX=this.FirstX-this.ObjW,this.targetSymbol.spriteFrame=this.SymbolSprite[n.P3],this.Level3PassBlock.children.map(function(e){return e.active=!0}),this.roundText[0].node.active=!1,this.roundText[1].node.active=!1,this.roundText[2].node.active=!0,this.playManager.AudioManager.PlayMainBGM("bgm_3.mp3")}},t.prototype.DropStart=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.m_Topo=e,this.clearIndex=0,this.LevelSwitch(!0),[4,this.LevelPosRest()];case 1:return t.sent(),this.m_Topo.Type!=r.StateEnum.GameType.Notwin?[3,3]:[4,this.LoadDrop()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.LevelPosRest=function(){return __awaiter(this,void 0,void 0,function(){var e,t,a,n,o,r,s,u,l,p,h,d,m,g;return __generator(this,function(y){switch(y.label){case 0:for(e=this.HideY,t=this.Row,a=0,this.TopObjArray.forEach(function(e){null==e&&null==e||e.destroy()}),this.TopObjArray=new Array,this.CandyPool.forEach(function(e){null==e&&null==e||e.destroy()}),this.CandyPool=new Array,this.FakePool.forEach(function(e){null==e&&null==e||e.destroy()}),this.FakePool=new Array,s=0;s<this.Row*this.Row;s++)n=cc.instantiate(this.CandyPrefab),o=Math.ceil((s+1)/this.Row),s%this.Row==0&&(a=0),r=this.FirstX+this.ObjW*a,a++,s>=t&&(e=this.HideY+this.ObjH*(o-1)),n.parent=this.levelParent,n.position=cc.v2(r,e),n.name=""+s,t=o*this.Row,n.getComponent(cc.Sprite).spriteFrame=this.SymbolSprite[this.m_Topo.TopoMain[s]],this.CandyPool.push(n);s=0,y.label=1;case 1:if(!(s<this.Row))return[3,7];u=this.CandyPool.slice(s*this.Row,this.Row*(s+1)),c.default.shuffle(u),l=0,y.label=2;case 2:return l<u.length?(p=c.default.RandomRange(0,10),[4,c.default.delay(p)]):[3,6];case 3:return y.sent(),h=u[l].getComponent(i.default),d=this.isFast?this.FastDropTime:this.DropTime,[4,h.Drop(this.Buttom+this.ObjH*s,!0,!0,d)];case 4:y.sent(),y.label=5;case 5:return l++,[3,2];case 6:return s++,[3,1];case 7:return m=this.isFast?this.FastDropTime:this.DropTime,g=this.Row*this.Row*m,[4,c.default.delay(g)];case 8:return y.sent(),[4,this.PreDrop()];case 9:return y.sent(),[2]}})})},t.prototype.PreDrop=function(){return __awaiter(this,void 0,void 0,function(){var e,t,a,n,o,r,s,u,l,p,h,d,m=this;return __generator(this,function(g){switch(g.label){case 0:if(!(null!=this.m_Topo.FillPos[this.clearIndex]&&null!=this.m_Topo.FillSymbol[this.clearIndex]&&this.m_Topo.FillPos[this.clearIndex].length>0&&this.m_Topo.FillSymbol[this.clearIndex].length>0))return[3,8];this.TopObjArray=new Array,e=function(){var e,n,o,r,s,u,l,p,h;return __generator(this,function(d){switch(d.label){case 0:return e=cc.instantiate(t.CandyPrefab),n=Math.ceil((t.m_Topo.FillPos[t.clearIndex][a]+1)/t.Row),o=t.HideY+t.ObjH*n,r=t.FirstX+t.ObjW*(t.m_Topo.FillPos[t.clearIndex][a]%t.Row),e.parent=t.levelParent,e.position=cc.v2(r,o),e.name=""+t.m_Topo.FillPos[t.clearIndex][a],e.getComponent(cc.Sprite).spriteFrame=t.SymbolSprite[t.m_Topo.FillSymbol[t.clearIndex][a]],s=e.getComponent(i.default),u=c.default.RandomRange(0,10),[4,c.default.delay(u)];case 1:return d.sent(),l=0,p=t.TopObjArray.filter(function(t){return t.x==e.x}),l=p.length>0?t.Top+t.ObjH*n:t.Top,h=t.isFast?t.FastDropTime:t.DropTime,[4,s.Drop(l,!1,!1,h)];case 2:return d.sent(),t.TopObjArray.push(e),[2]}})},t=this,a=0,g.label=1;case 1:return a<this.m_Topo.FillPos[this.clearIndex].length?[5,e()]:[3,4];case 2:g.sent(),g.label=3;case 3:return a++,[3,1];case 4:if(!(this.m_Topo.FillPos[this.clearIndex].length<this.Row))return[3,8];n=this.Row-this.m_Topo.FillPos[this.clearIndex].length,o=0,g.label=5;case 5:if(!(o<n))return[3,8];if(0==this.m_Topo.FillPos[this.clearIndex].filter(function(e){return function(){return Math.ceil((e+1)/m.Row)==o}}).length)return[3,7];switch(r=cc.instantiate(this.CandyPrefab),s=this.FirstX+this.ObjW*o,r.parent=this.levelParent,r.position=cc.v2(s,this.HideY+600),u=void 0,this.NowLevel){case 1:u=c.default.RandomRange(0,4);break;case 2:u=c.default.RandomRange(5,9);break;case 3:u=c.default.RandomRange(10,14)}return r.getComponent(cc.Sprite).spriteFrame=this.SymbolSprite[u],l=r.getComponent(i.default),p=this.isFast?this.FastDropTime:this.DropTime,[4,l.Drop(this.Top,!1,!1,p)];case 6:g.sent(),this.FakePool.push(r),g.label=7;case 7:return o++,[3,5];case 8:return h=this.isFast?this.FastDropTime:this.DropTime,d=this.m_Topo.FillSymbol.length*h,[4,c.default.delay(d+500)];case 9:return g.sent(),[4,this.ClearSymbol()];case 10:return g.sent(),[2]}})})},t.prototype.ClearSymbol=function(){return __awaiter(this,void 0,void 0,function(){var e,t,a,o,r,s,c,l,p,h,d,m,g,y,f,S,_=this;return __generator(this,function(M){switch(M.label){case 0:if(!(null!=this.m_Topo.ClearPos[this.clearIndex]&&this.m_Topo.ClearPos[this.clearIndex].length>0))return[3,11];for(this.SortPool(this.CandyPool),S=0;S<this.m_Topo.ClearPos[this.clearIndex].length;S++)if(this.m_Topo.TopoMain[this.m_Topo.ClearPos[this.clearIndex][S]]==n.Bonus||this.m_Topo.TopoMain[this.m_Topo.ClearPos[this.clearIndex][S]]==n.P1||this.m_Topo.TopoMain[this.m_Topo.ClearPos[this.clearIndex][S]]==n.P2||this.m_Topo.TopoMain[this.m_Topo.ClearPos[this.clearIndex][S]]==n.P3){if(this.CandyPool[this.m_Topo.ClearPos[this.clearIndex][S]].getComponent(cc.Animation).play("StagePassSymbolEffect"),this.CandyPool[this.m_Topo.ClearPos[this.clearIndex][S]].children.filter(function(e){return"PassSE"==e.name}).forEach(function(e){return e.getComponent(u.default).play()}),(this.m_Topo.TopoMain[this.m_Topo.ClearPos[this.clearIndex][S]]==n.P1||this.m_Topo.TopoMain[this.m_Topo.ClearPos[this.clearIndex][S]]==n.P2||this.m_Topo.TopoMain[this.m_Topo.ClearPos[this.clearIndex][S]]==n.P3)&&this.passCount<15)switch(this.passCount++,this.PassCountNumber.string=this.passCount+"/15",this.NowLevel){case 1:this.Level1PassBlock.children[this.Level1PassBlock.children.length-this.passCount].active=!1;break;case 2:this.Level2PassBlock.children[this.Level1PassBlock.children.length-this.passCount].active=!1;break;case 3:this.Level3PassBlock.children[this.Level1PassBlock.children.length-this.passCount].active=!1}}else this.CandyPool[this.m_Topo.ClearPos[this.clearIndex][S]].getComponent(cc.Animation).play("SymbolClearEffect"),this.CandyPool[this.m_Topo.ClearPos[this.clearIndex][S]].children.filter(function(e){return"ClearSE"==e.name}).forEach(function(e){return e.getComponent(u.default).play()});for(this.m_Topo.Win>0&&this.playManager.ShowWin(),e=new Array,S=0;S<this.m_Topo.ClearPos[this.clearIndex].length;S++)for(t=function(){var t=a.m_Topo.ClearPos[a.clearIndex][S]+a.Row*o;0==a.m_Topo.ClearPos[a.clearIndex].filter(function(e){return e==t}).length&&0==e.filter(function(e){return e==t}).length&&t<a.Row*a.Row&&e.push(t)},a=this,o=0;o<this.Row;o++)t();for(e.sort(function(e,t){return Number(e)>Number(t)?1:-1}),S=0;S<e.length;S++){for(r=this.CandyPool[e[S]],0,c=void 0,l=Math.ceil((e[S]+1)/this.Row),p=void 0,p=new Array,h=void 0,h=new Array,d=function(t){h.push(m.m_Topo.ClearPos[m.clearIndex].filter(function(a){return a==e[S]-_.Row*t})[0]),h.sort(function(e,t){return e>t?1:-1});var a=h[0];null!=a&&(c=a),p=e.filter(function(a){return a==e[S]-_.Row*t})},m=this,g=l;g>0;g--)d(g);y=Math.ceil((c+1)/this.Row),void 0,f=y-1+p.length,s=this.Buttom+this.ObjH*f,r.getComponent(i.default).Drop(s,!0,!0,.1)}return[4,this.SortPool(this.CandyPool)];case 1:for(M.sent(),S=0;S<this.m_Topo.ClearPos[this.clearIndex].length;S++)this.CandyPool[this.m_Topo.ClearPos[this.clearIndex][S]].destroy(),this.CandyPool.splice(this.m_Topo.ClearPos[this.clearIndex][S],1,this.TopObjArray[S]);return[4,this.FillDrop()];case 2:return M.sent(),this.m_Topo.TopoMain.filter(function(e){return e==n.Bonus}).length>0?[4,this.LoadDrop()]:[3,5];case 3:return M.sent(),[4,this.playManager.FreeGameManager.FreeGameEnter().then(function(){throw"Break chain"})];case 4:M.sent(),M.label=5;case 5:return this.clearIndex++,this.m_Topo.ClearPos.length>this.clearIndex?[4,this.PreDrop()]:[3,8];case 6:return M.sent(),[4,this.ClearSymbol()];case 7:return M.sent(),[3,10];case 8:return[4,this.LoadDrop()];case 9:M.sent(),M.label=10;case 10:return[3,12];case 11:case 12:return[2]}})})},t.prototype.FillDrop=function(){return __awaiter(this,void 0,void 0,function(){var e,t,a,n;return __generator(this,function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return e<this.TopObjArray.length?(t=this.TopObjArray[e].getComponent(i.default),a=Math.ceil((this.m_Topo.FillPos[this.clearIndex][e]+1)/this.Row),n=this.isFast?this.FastDropTime:this.DropTime,[4,t.Drop(this.Buttom+this.ObjH*(a-1),!0,!0,n)]):[3,5];case 2:return o.sent(),[4,c.default.delay(c.default.RandomRange(0,10))];case 3:o.sent(),o.label=4;case 4:return e++,[3,1];case 5:return this.isFast?this.FastDropTime:this.DropTime,[2]}})})},t.prototype.LoadDrop=function(){return __awaiter(this,void 0,void 0,function(){var e,t,a,n,o,s,u,l,p,h,d,m=this;return __generator(this,function(g){switch(g.label){case 0:if(e=this.Row,!(this.FakePool.length>0))return[3,5];e-=this.FakePool.length,o=0,g.label=1;case 1:if(!(o<e))return[3,4];if(t=void 0,null!=this.m_Topo.FillPos[this.clearIndex-1]&&(t=0==this.m_Topo.FillPos[this.clearIndex-1].filter(function(e){return function(){return Math.ceil((e+1)/m.Row)==o}}).length),a=Math.ceil((this.m_Topo.FillPos[this.clearIndex-1][o]+1)/this.Row),t)return[3,3];switch(s=cc.instantiate(this.CandyPrefab),u=this.FirstX+this.ObjW*(a-1),s.parent=this.levelParent,s.position=cc.v2(u,this.HideY+600),l=void 0,this.NowLevel){case 1:l=c.default.RandomRange(0,4);break;case 2:l=c.default.RandomRange(5,9);break;case 3:l=c.default.RandomRange(10,14)}return s.getComponent(cc.Sprite).spriteFrame=this.SymbolSprite[l],p=s.getComponent(i.default),n=this.isFast?this.FastDropTime:this.DropTime,[4,p.Drop(this.Top,!1,!1,n)];case 2:g.sent(),this.FakePool.push(s),g.label=3;case 3:return o++,[3,1];case 4:return[3,9];case 5:o=0,g.label=6;case 6:if(!(o<e))return[3,9];switch(s=cc.instantiate(this.CandyPrefab),u=this.FirstX+this.ObjW*o,s.parent=this.levelParent,s.position=cc.v2(u,this.HideY+600),l=void 0,this.NowLevel){case 1:l=c.default.RandomRange(0,4);break;case 2:l=c.default.RandomRange(5,9);break;case 3:l=c.default.RandomRange(10,14)}return s.getComponent(cc.Sprite).spriteFrame=this.SymbolSprite[l],p=s.getComponent(i.default),h=this.isFast?this.FastDropTime:this.DropTime,[4,p.Drop(this.Top,!1,!1,h)];case 7:g.sent(),this.FakePool.push(s),g.label=8;case 8:return o++,[3,6];case 9:return 15==this.passCount&&(this.NowLevel++,this.NowLevel>3&&(this.NowLevel=1),this.SetLevel()),d=this.isFast?this.FastDropTime:this.DropTime,this.m_Topo.Type!=r.StateEnum.GameType.Notwin?[3,11]:[4,c.default.delay(800)];case 10:return g.sent(),[3,13];case 11:return[4,c.default.delay(d*this.Row+200)];case 12:g.sent(),g.label=13;case 13:return this.LevelSwitch(!1),[4,this.playManager.DropStop()];case 14:return g.sent(),[2]}})})},t.prototype.SortPool=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return null==e||0==e.length?[2]:(e.sort(function(e,t){return e.y+5>t.y&&e.y-5<t.y?e.x-t.x:e.y-t.y}),[2])})})},t.prototype.FastDelayTime=function(e){return this.isFast?e*this.fastMultiple:e},__decorate([h(cc.Prefab)],t.prototype,"CandyPrefab",void 0),__decorate([h(cc.SpriteFrame)],t.prototype,"SymbolSprite",void 0),__decorate([h(cc.Sprite)],t.prototype,"targetSymbol",void 0),__decorate([h(cc.Sprite)],t.prototype,"roundText",void 0),__decorate([h(cc.Node)],t.prototype,"levelParent",void 0),__decorate([h(cc.Node)],t.prototype,"Level1PassBlock",void 0),__decorate([h(cc.Node)],t.prototype,"Level2PassBlock",void 0),__decorate([h(cc.Node)],t.prototype,"Level3PassBlock",void 0),__decorate([h(cc.Label)],t.prototype,"PassCountNumber",void 0),__decorate([h(cc.AudioClip)],t.prototype,"a_clear",void 0),__decorate([h(cc.AudioClip)],t.prototype,"a_pass",void 0),t=__decorate([p],t)}(cc.Component);a.default=d,cc._RF.pop()},{"./Audio/AudioPlayer":"AudioPlayer","./Candy":"Candy","./State":"State","./Tools/Tools":"Tools","./Topo":"Topo"}],CandyPlayManager:[function(e,t,a){"use strict";cc._RF.push(t,"2ea44ySxRJGe7NvXGY4bQ3L","CandyPlayManager"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./Topo"),o=e("./CandyManager"),i=e("./State"),r=e("./GameData"),s=e("./UIManager"),c=e("./Tools/Tools"),u=e("./FreeGameManager"),l=e("./Audio/AudioManager"),p=cc._decorator,h=p.ccclass,d=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=new i.default,t.gameData=new r.default,t.Test=!1,t.CandyManager=null,t.UIManager=null,t.FreeGameManager=null,t.AudioManager=null,t.Topo=new n.default,t.TestType=0,t.TypeTestSwitch=!0,t}return __extends(t,e),t.prototype.onLoad=function(){this.state.StateInint(),this.UIManager.playManager=this,this.CandyManager.playManager=this,this.FreeGameManager.playmager=this,this.Test&&this.UIManager.SetChips(2e3)},t.prototype.start=function(){},t.prototype.Spin=function(){this.state.CurrentMain==i.StateEnum.Main.GameIdle&&this.gameData.Chips>=this.gameData.TotalBet?(this.UIManager.UISpin.getComponent(cc.Button).interactable=!1,this.UIManager.UILessBet.getComponent(cc.Button).interactable=!1,this.UIManager.UIAddBet.getComponent(cc.Button).interactable=!1,this.state.SetCurrentMain(i.StateEnum.Main.GameRun),this.CostChip(),this.SpinStart()):this.gameData.Chips<this.gameData.TotalBet&&(this.state.SetCurrentGameMode(i.StateEnum.GameMode.Spin),this.UIManager.UISpin.getComponent(cc.Button).interactable=!0,this.UIManager.UILessBet.getComponent(cc.Button).interactable=!0,this.UIManager.UIAddBet.getComponent(cc.Button).interactable=!0,this.CandyManager.isFast=!1,this.UIManager.SetUIFast(!1),this.UIManager.SetUIAuto(!1))},t.prototype.CostChip=function(){this.gameData.Chips>=this.gameData.TotalBet&&this.UIManager.SetChips(this.gameData.Chips-this.gameData.TotalBet)},t.prototype.SpinStart=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.state.SetCurrentGameRun(i.StateEnum.GameRun.WaitingTopo),[4,this.GettingTopo()];case 1:return e.sent(),[4,c.default.delay(300)];case 2:return e.sent(),[4,this.PlayStart()];case 3:return e.sent(),[2]}})})},t.prototype.FreeGameStart=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.state.SetCurrentGameRun(i.StateEnum.GameRun.FreeGame),[4,this.GettingTopo()];case 1:return e.sent(),[4,c.default.delay(300)];case 2:return e.sent(),[4,this.PlayStart()];case 3:return e.sent(),[2]}})})},t.prototype.GettingTopo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.state.CurrentGameRun==i.StateEnum.GameRun.FreeGame?this.Topo=this.RandomTestTopo():this.Topo=this.TestTopo(),[2]})})},t.prototype.PlayStart=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.CandyManager.DropStart(this.Topo)];case 1:return e.sent(),[2]}})})},t.prototype.DropStop=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.state.CurrentGameRun!=i.StateEnum.GameRun.FreeGame&&this.UIManager.SetWin(0),this.state.CurrentGameMod!=i.StateEnum.GameMode.Spin||0!=this.FreeGameManager.spinCount?[3,1]:(this.UIManager.UISpin.getComponent(cc.Button).interactable=!0,this.UIManager.UILessBet.getComponent(cc.Button).interactable=!0,this.UIManager.UIAddBet.getComponent(cc.Button).interactable=!0,this.state.SetCurrentMain(i.StateEnum.Main.GameIdle),this.state.SetCurrentGameRun(i.StateEnum.GameRun.Idle),[3,3]);case 1:return this.state.CurrentGameMod!=i.StateEnum.GameMode.Auto&&this.state.CurrentGameMod!=i.StateEnum.GameMode.Fast?[3,3]:this.state.CurrentGameRun==i.StateEnum.GameRun.FreeGame?[3,3]:(this.state.SetCurrentMain(i.StateEnum.Main.GameIdle),this.state.SetCurrentGameRun(i.StateEnum.GameRun.Idle),[4,c.default.delay(1e3)]);case 2:e.sent(),this.Spin(),e.label=3;case 3:return[2]}})})},t.prototype.ShowWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.UIManager.lineWin.node.parent.getComponent(cc.Animation).play(),this.UIManager.lineWin.string=c.default.milliFormat(this.Topo.LineWin[this.CandyManager.clearIndex]),this.UIManager.winCountText.string="X"+c.default.milliFormat(this.Topo.WinCount[this.CandyManager.clearIndex]),this.UIManager.UIShowWinSymbol.spriteFrame=this.CandyManager.SymbolSprite[this.Topo.WinSymbol[this.CandyManager.clearIndex]],this.state.CurrentGameRun!=i.StateEnum.GameRun.FreeGame?this.UIManager.SetWin(this.Topo.LineWin[this.CandyManager.clearIndex]):(this.FreeGameManager.allWin+=this.Topo.LineWin[this.CandyManager.clearIndex],this.UIManager.SetWin(this.FreeGameManager.allWin)),this.UIManager.SetChips(this.gameData.Chips+this.Topo.LineWin[this.CandyManager.clearIndex]),[2]})})},t.prototype.UISpin=function(){switch(this.state.CurrentMain){case i.StateEnum.Main.Bm:break;case i.StateEnum.Main.GameIdle:this.Spin();break;case i.StateEnum.Main.GameFreeGame:break;case i.StateEnum.Main.GameHelp:this.state.SetCurrentMain(i.StateEnum.Main.GameIdle);break;case i.StateEnum.Main.GameRun:this.Spin(),this.UIManager.WinRunStart();break;case i.StateEnum.Main.Error:}},t.prototype.UIAuto=function(){this.state.CurrentGameMod!=i.StateEnum.GameMode.Auto?(this.state.CurrentGameMod==i.StateEnum.GameMode.Fast&&(this.CandyManager.isFast=!1,this.UIManager.SetUIFast(!1)),this.UIManager.UISpin.getComponent(cc.Button).interactable=!1,this.UIManager.UILessBet.getComponent(cc.Button).interactable=!1,this.UIManager.UIAddBet.getComponent(cc.Button).interactable=!1,this.state.SetCurrentGameMode(i.StateEnum.GameMode.Auto),this.UIManager.SetUIAuto(!0),this.Spin()):(this.state.SetCurrentGameMode(i.StateEnum.GameMode.Spin),this.UIManager.SetUIAuto(!1)),this.UIManager.WinRunBreak()},t.prototype.UIFast=function(){this.state.CurrentGameMod!=i.StateEnum.GameMode.Fast?(this.state.CurrentGameMod==i.StateEnum.GameMode.Auto&&this.UIManager.SetUIAuto(!1),this.state.SetCurrentGameMode(i.StateEnum.GameMode.Fast),this.UIManager.UISpin.getComponent(cc.Button).interactable=!1,this.UIManager.UILessBet.getComponent(cc.Button).interactable=!1,this.UIManager.UIAddBet.getComponent(cc.Button).interactable=!1,this.CandyManager.isFast=!0,this.UIManager.SetUIFast(!0),this.Spin()):(this.state.SetCurrentGameMode(i.StateEnum.GameMode.Spin),this.CandyManager.isFast=!1,this.UIManager.SetUIFast(!1)),this.UIManager.WinRunBreak()},t.prototype.TestTopo=function(){var e,t=new n.default;switch(this.TypeTestSwitch||((e=c.default.RandomRange(0,100))<=25?this.TestType=0:e>25&&e<=50?this.TestType=1:e>50&&e<=80?this.TestType=3:e>80&&e<=100&&(this.TestType=2)),this.TestType){case i.StateEnum.GameType.Notwin:switch(t.Type=i.StateEnum.GameType.Notwin,this.CandyManager.NowLevel){case 1:t.TopoMain=[3,1,2,3,1,4,0,2,4,0,2,0,1,4,4,1,3];break;case 2:t.TopoMain=[5,6,7,8,9,9,8,7,6,5,5,7,8,9,6,8,9,7,6,6,5,9,8,5,9];break;case 3:t.TopoMain=[10,11,12,13,14,14,13,12,11,10,11,14,13,11,12,12,10,10,14,10,13,10,12,12,14,10,11,12,13,14,14,13,12,11,10,14]}break;case i.StateEnum.GameType.Normal:switch(t.Type=i.StateEnum.GameType.Normal,this.CandyManager.NowLevel){case 1:t.TopoMain=[3,1,0,3,1,4,0,3,0,0,0,0,1,4,0,1,3],t.ClearPos=[[2,6,8,9,10,11,14],[2,6,10,12,13,14,15]],t.FillSymbol=[[2,2,2,2,2,2,2],[3,1,4,3,3,1,4]],t.FillPos=[[2,6,10,12,13,14,15],[2,6,10,12,13,14,15]],t.WinCount=[7,7],t.WinSymbol=[0,2],t.LineWin=[8,40];break;case 2:t.TopoMain=[8,5,6,6,7,8,6,5,7,9,8,5,6,9,6,9,9,9,9,9,7,8,8,9,5],t.ClearPos=[[13,15,16,17,18,19,23]],t.FillSymbol=[[6,9,9,6,8,7,9]],t.FillPos=[[13,18,20,21,22,23,24]],t.WinCount=[7],t.WinSymbol=[9],t.LineWin=[100];break;case 3:t.TopoMain=[13,10,11,11,12,11,13,11,10,12,14,14,13,10,11,14,11,13,14,14,14,14,14,10,12,13,13,14,10,12,12,11,13,11,10,11],t.ClearPos=[[15,18,19,20,21,22,27]],t.FillSymbol=[[14,14,14,14,10,14,12]],t.FillPos=[[21,27,30,31,32,33,34]],t.WinCount=[7],t.WinSymbol=[14],t.LineWin=[50]}for(var a=0;a<t.LineWin.length;a++)t.LineWin[a]=t.LineWin[a]*this.gameData.BetMultiplier;t.Win=t.LineWin.reduce(function(e,t){return e+t});break;case i.StateEnum.GameType.FreeGame:switch(t.Type=i.StateEnum.GameType.FreeGame,this.CandyManager.NowLevel){case 1:t.TopoMain=[3,1,2,3,1,4,0,2,4,0,2,0,1,4,4,18],t.ClearPos=[[15]],t.FillPos=[[15]];break;case 2:t.TopoMain=[5,6,7,8,9,9,8,7,6,5,5,7,8,9,6,8,9,7,6,6,5,9,8,5,18],t.ClearPos=[[24]],t.FillPos=[[24]];break;case 3:t.TopoMain=[10,11,12,13,14,14,13,12,11,10,11,14,13,11,12,12,10,10,14,10,13,12,12,12,14,10,11,12,13,14,14,13,12,11,10,18],t.ClearPos=[[35]],t.FillPos=[[35]]}break;case i.StateEnum.GameType.Pass:t.Type=i.StateEnum.GameType.Pass;var o=void 0;switch(this.CandyManager.NowLevel){case 1:o=15,t.TopoMain=[3,1,2,3,1,4,0,2,4,0,2,0,1,4,4,o],t.ClearPos=[[15]],t.FillSymbol=[[1]],t.FillPos=[[15]];break;case 2:o=16,t.TopoMain=[5,6,7,8,9,9,8,7,6,5,5,7,8,9,6,8,9,7,6,6,5,9,8,5,o],t.ClearPos=[[24]],t.FillSymbol=[[5]],t.FillPos=[[24]];break;case 3:o=17,t.TopoMain=[10,11,12,13,14,14,13,12,11,10,11,14,13,11,12,12,10,10,14,10,13,10,12,12,14,10,11,12,13,14,14,13,12,11,10,o],t.ClearPos=[[35]],t.FillSymbol=[[10]],t.FillPos=[[35]]}}return t},t.prototype.RandomTestTopo=function(){var e=new n.default;switch(c.default.RandomRange(0,1)){case i.StateEnum.GameType.Notwin:switch(e.Type=i.StateEnum.GameType.Notwin,this.CandyManager.NowLevel){case 1:e.TopoMain=[3,1,2,3,1,4,0,2,4,0,2,0,1,4,4,1,3];break;case 2:e.TopoMain=[5,6,7,8,9,9,8,7,6,5,5,7,8,9,6,8,9,7,6,6,5,9,8,5,9];break;case 3:e.TopoMain=[10,11,12,13,14,14,13,12,11,10,11,14,13,11,12,12,10,10,14,10,13,10,12,12,14,10,11,12,13,14,14,13,12,11,10,14]}break;case i.StateEnum.GameType.Normal:switch(e.Type=i.StateEnum.GameType.Normal,this.CandyManager.NowLevel){case 1:e.TopoMain=[3,1,0,3,1,4,0,3,0,0,0,0,1,4,0,1,3],e.ClearPos=[[2,6,8,9,10,11,14],[2,6,10,12,13,14,15]],e.FillSymbol=[[2,2,2,2,2,2,2],[3,1,4,3,3,1,4]],e.FillPos=[[2,6,10,12,13,14,15],[2,6,10,12,13,14,15]],e.WinCount=[7,7],e.WinSymbol=[0,2],e.LineWin=[8,40];break;case 2:e.TopoMain=[8,5,6,6,7,8,6,5,7,9,8,5,6,9,6,9,9,9,9,9,7,8,8,9,5],e.ClearPos=[[13,15,16,17,18,19,23]],e.FillSymbol=[[6,9,9,6,8,7,9]],e.FillPos=[[13,18,20,21,22,23,24]],e.WinCount=[7],e.WinSymbol=[9],e.LineWin=[100];break;case 3:e.TopoMain=[13,10,11,11,12,11,13,11,10,12,14,14,13,10,11,14,11,13,14,14,14,14,14,10,12,13,13,14,10,12,12,11,13,11,10,11],e.ClearPos=[[15,18,19,20,21,22,27]],e.FillSymbol=[[14,14,14,14,10,14,12]],e.FillPos=[[21,27,30,31,32,33,34]],e.WinCount=[7],e.WinSymbol=[14],e.LineWin=[50]}for(var t=0;t<e.LineWin.length;t++)e.LineWin[t]=e.LineWin[t]*this.gameData.BetMultiplier,e.LineWin[t]=e.LineWin[t]*this.FreeGameManager.multiple;e.Win=e.LineWin.reduce(function(e,t){return e+t})}return e},__decorate([d],t.prototype,"Test",void 0),__decorate([d(o.default)],t.prototype,"CandyManager",void 0),__decorate([d(s.default)],t.prototype,"UIManager",void 0),__decorate([d(u.default)],t.prototype,"FreeGameManager",void 0),__decorate([d(l.default)],t.prototype,"AudioManager",void 0),__decorate([d],t.prototype,"TestType",void 0),__decorate([d],t.prototype,"TypeTestSwitch",void 0),t=__decorate([h],t)}(cc.Component);a.default=m,cc._RF.pop()},{"./Audio/AudioManager":"AudioManager","./CandyManager":"CandyManager","./FreeGameManager":"FreeGameManager","./GameData":"GameData","./State":"State","./Tools/Tools":"Tools","./Topo":"Topo","./UIManager":"UIManager"}],Candy:[function(e,t,a){"use strict";cc._RF.push(t,"b0d41KhO7tFebHO4iMy/PZN","Candy"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./Tools/Tools"),o=e("./Audio/AudioPlayer"),i=cc._decorator,r=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boundY=25,t.boundY2=5,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.Drop=function(e,t,a,i,r){return void 0===a&&(a=!0),void 0===i&&(i=.5),void 0===r&&(r=null),__awaiter(this,void 0,void 0,function(){var s,c,u,l,p,h,d=this;return __generator(this,function(m){return s=cc.moveTo(.15,cc.v2(this.node.x,e+this.boundY)),c=cc.moveTo(.1,cc.v2(this.node.x,e)),u=cc.moveTo(.1,cc.v2(this.node.x,e+this.boundY2)),this.action=cc.moveTo(i,cc.v2(this.node.x,e)),l=cc.callFunc(function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n.default.delay(10)];case 1:return e.sent(),[2]}})})},this),p=cc.callFunc(function(){t&&d.node.getComponent(o.default).play()},this),null==r&&(r=cc.callFunc(function(){},this)),h=a?cc.sequence(this.action,p,s,l,c,u,c,r):cc.sequence(this.action,p,l,r),this.node.runAction(h),[2]})})},t=__decorate([r],t)}(cc.Component));a.default=s,cc._RF.pop()},{"./Audio/AudioPlayer":"AudioPlayer","./Tools/Tools":"Tools"}],FreeGameManager:[function(e,t,a){"use strict";cc._RF.push(t,"30a16Dk9dZG76ztE8jCzkue","FreeGameManager"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./Tools/Tools"),o=e("./State"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playmager=null,t.FreeGameUI=null,t.ShowUI=null,t.ResultUI=null,t.RoundText=null,t.AfterHide=new Array,t.SpinCountText=null,t.ResultWin=null,t.FreeGameBG=null,t.multipleShow=null,t.Lights=null,t.Effects=new Array,t.ResultEffects=new Array,t.multipleTexts=new Array,t.multipleText=null,t.allWin=0,t.multiple=0,t.spinCount=0,t.used=0,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.FreeGameEnter=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.multiple=5,this.spinCount=10,this.used=0,this.playmager.UIManager.UISpin.node.active=!1,this.playmager.UIManager.UIautoSpin.node.active=!1,this.playmager.UIManager.UIfastSpin.node.active=!1,this.playmager.UIManager.UIAddBet.getComponent(cc.Button).interactable=!1,this.playmager.UIManager.UILessBet.getComponent(cc.Button).interactable=!1,this.AfterHide.map(function(e){return e.active=!0}),this.FreeGameUI.active=!0,this.RoundText.active=!1,this.ResultWin.string="",this.allWin=0,this.playmager.AudioManager.StopNowBGM(),this.playmager.AudioManager.PlayScatterBGM(),this.FreeGameBG.node.active=!0,this.FreeGameBG.play(),this.SpinCountText.string=""+this.spinCount,this.ShowUI.active=!0,this.multipleShow.play(),this.Effects.map(function(e){return e.play()}),[4,n.default.delay(2e3)];case 1:return e.sent(),this.multipleText.getComponent(cc.Animation).play(),this.AfterHide.map(function(e){return e.active=!1}),this.Lights.play(),[4,n.default.delay(1e3)];case 2:return e.sent(),this.ShowUI.active=!1,[4,this.FreeGamePlay()];case 3:return e.sent(),[2]}})})},t.prototype.FreeGamePlay=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n.default.delay(1e3)];case 1:return e.sent(),this.spinCount--,this.SpinCountText.string=""+this.spinCount,this.used++,[4,this.playmager.FreeGameStart()];case 2:return e.sent(),this.playmager.state.SetCurrentGameRun(o.StateEnum.GameRun.FreeGame),this.used<10?[4,this.FreeGamePlay()]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,this.FreeGameEnd()];case 5:e.sent(),e.label=6;case 6:return[2]}})})},t.prototype.FreeGameEnd=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.FreeGameBG.stop(),this.FreeGameBG.node.active=!1,this.ResultUI.active=!0,this.ResultEffects.map(function(e){return e.play()}),[4,this.ShowNumber()];case 1:switch(e.sent(),this.playmager.AudioManager.StopNowBGM(),this.playmager.CandyManager.NowLevel){case 1:this.playmager.AudioManager.PlayMainBGM("bgm_1.mp3");break;case 2:this.playmager.AudioManager.PlayMainBGM("bgm_2.mp3");break;case 3:this.playmager.AudioManager.PlayMainBGM("bgm_3.mp3")}return[4,n.default.delay(3e3)];case 2:switch(e.sent(),this.playmager.state.SetCurrentGameRun(o.StateEnum.GameRun.Idle),this.playmager.state.SetCurrentMain(o.StateEnum.Main.GameIdle),this.playmager.UIManager.UISpin.node.active=!0,this.playmager.UIManager.UIautoSpin.node.active=!0,this.playmager.UIManager.UIfastSpin.node.active=!0,this.playmager.state.CurrentGameMod){case o.StateEnum.GameMode.Spin:this.playmager.UIManager.UIAddBet.getComponent(cc.Button).interactable=!0,this.playmager.UIManager.UILessBet.getComponent(cc.Button).interactable=!0;break;case o.StateEnum.GameMode.Auto:case o.StateEnum.GameMode.Fast:this.playmager.Spin()}return this.playmager.UIManager.SetWin(0),this.RoundText.active=!0,this.FreeGameUI.active=!1,this.ResultUI.active=!1,[2]}})})},t.prototype.ShowNumber=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(a){switch(a.label){case 0:e=""+n.default.milliFormat(this.allWin),t=e.length,a.label=1;case 1:return t>0?(this.ResultWin.string=this.ResultWin.string.substring(0,0)+e.substring(t-1,t)+this.ResultWin.string.substring(0),[4,n.default.delay(500)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t--,[3,1];case 4:return[2]}})})},__decorate([s(cc.Node)],t.prototype,"FreeGameUI",void 0),__decorate([s(cc.Node)],t.prototype,"ShowUI",void 0),__decorate([s(cc.Node)],t.prototype,"ResultUI",void 0),__decorate([s(cc.Node)],t.prototype,"RoundText",void 0),__decorate([s(cc.Node)],t.prototype,"AfterHide",void 0),__decorate([s(cc.Label)],t.prototype,"SpinCountText",void 0),__decorate([s(cc.Label)],t.prototype,"ResultWin",void 0),__decorate([s(cc.Animation)],t.prototype,"FreeGameBG",void 0),__decorate([s(cc.Animation)],t.prototype,"multipleShow",void 0),__decorate([s(cc.Animation)],t.prototype,"Lights",void 0),__decorate([s(cc.Animation)],t.prototype,"Effects",void 0),__decorate([s(cc.Animation)],t.prototype,"ResultEffects",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"multipleTexts",void 0),__decorate([s(cc.Sprite)],t.prototype,"multipleText",void 0),t=__decorate([r],t)}(cc.Component);a.default=c,cc._RF.pop()},{"./State":"State","./Tools/Tools":"Tools"}],FullScreenTS:[function(e,t,a){"use strict";cc._RF.push(t,"37139oxtJpGdaFvwnNmgyGv","FullScreenTS"),Object.defineProperty(a,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),a=t,t.prototype.onLoad=function(){if(a.self=this.node.getComponent(a),cc.sys.isMobile){var e=this;document.getElementsByTagName("body")[0].style.height="110vh",document.getElementsByTagName("body")[0].style.color="#000000",document.getElementsByTagName("body")[0].style.backgroundColor="#000000";var t=document.createElement("div");t.id="orientationswipe",t.style.background="url(./res/raw-assets/resources/SwipGif/zh-cn/swipe.gif)",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundRepeat="no-repeat",t.style.backgroundSize="100%",t.style.backgroundPosition="center",t.style.backgroundColor="#000000",t.style.zIndex="999",t.style.display="block",t.style.opacity="1",document.body.appendChild(t);var n=document.createElement("div");n.id="orientationrotate",n.style.background="url(./res/raw-assets/resources/SwipGif/zh-cn/pic_tips_landscape.gif)",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.backgroundColor="#000000",n.style.backgroundSize="60%",n.style.zIndex="999",n.style.display="none",n.style.opacity="1",document.body.appendChild(n),a.outHet=window.screen.availHeight,a.innerHet=window.innerHeight,a.VH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),window.addEventListener("orientationchange",function(){e.displayRotate()}),window.onresize=function(){e.Resize()},window.onscroll=function(){a.isScroll=!0,setTimeout(function(){a.isScroll=!1},10)},t.addEventListener("touchend",function(e){console.log("touchend"),a.isFullScreen?(setTimeout(function(){window.scrollTo(0,0),console.log("TouchED ScrollTo")},500),setTimeout(function(){document.getElementsByTagName("body")[0].style.height="100vh",console.log("BodyHeight:"+document.getElementsByTagName("body")[0].style.height)},100)):document.getElementsByTagName("body")[0].style.height="120vh"})}},t.prototype.start=function(){},t.prototype.Resize=function(){if(0==window.orientation){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=document.getElementById("orientationswipe");console.log("isFull?"+a.isFullScreen),e!=a.VH&&(e<a.VH?(t.style.display="block",a.isFullScreen=!1):(t.style.display="none",a.isFullScreen=!0)),a.VH=e}},t.prototype.displayRotate=function(){var e=document.getElementById("orientationrotate"),t=document.getElementById("orientationswipe");0!=window.orientation?(t.style.display="none",e.style.display="block"):(a.isFullScreen||(t.style.display="block"),e.style.display="none")},t.maxPorHet=0,t.maxLanHet=0,t.defultPorHet=0,t.defultLanHet=0,t.outHet=0,t.innerHet=0,t.VH=0,t.isFullScreen=!1,t.isScroll=!1,t=a=__decorate([o],t);var a}(cc.Component));a.default=i,cc._RF.pop()},{}],GameData:[function(e,t,a){"use strict";cc._RF.push(t,"2febeqaNOBCK430Tzv6qI75","GameData"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){this.betIndex=0,this.mChip=0}return Object.defineProperty(e.prototype,"TotalBet",{get:function(){return e.BetBase*e.Raito*e.BetList[this.betIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BetMultiplier",{get:function(){return e.BetList[this.betIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Chips",{get:function(){return this.mChip},enumerable:!0,configurable:!0}),e.prototype.DataInint=function(){this.betIndex=0},e.prototype.AddBet=function(){this.betIndex++,this.betIndex>e.BetList.length-1&&(this.betIndex=0)},e.prototype.LessBet=function(){this.betIndex--,this.betIndex<0&&(this.betIndex=e.BetList.length-1)},e.prototype.SetChip=function(e){this.mChip=e},e.BetBase=.1,e.Raito=100,e.BetList=[2,3,5,10,20,30,60,120,250,360,600,1200,2500,6e3,12e3,2e4],e}();a.default=n,cc._RF.pop()},{}],LanguageButtom:[function(e,t,a){"use strict";cc._RF.push(t,"51cc9/QYzZA+rnpQCVlwyOP","LanguageButtom"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./LanguageManager"),o=cc._decorator,i=o.ccclass,r=o.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enSprite=new Array,t.cnSprite=Array(),t.buttom=null,t}return __extends(t,e),t.prototype.start=function(){this.buttom=this.node.getComponent(cc.Button),this.Set()},t.prototype.Set=function(){switch(n.default.language){case n.LanguageNamspace.Language.Chinese:this.buttom.normalSprite=this.cnSprite[0],this.buttom.pressedSprite=this.cnSprite[1],this.buttom.hoverSprite=this.cnSprite[2],this.buttom.disabledSprite=this.cnSprite[3];break;case n.LanguageNamspace.Language.English:this.buttom.normalSprite=this.enSprite[0],this.buttom.pressedSprite=this.enSprite[1],this.buttom.hoverSprite=this.enSprite[2],this.buttom.disabledSprite=this.enSprite[3]}},__decorate([r(cc.SpriteFrame)],t.prototype,"enSprite",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"cnSprite",void 0),t=__decorate([i],t)}(cc.Component);a.default=s,cc._RF.pop()},{"./LanguageManager":"LanguageManager"}],LanguageManager:[function(e,t,a){"use strict";var n,o,i;cc._RF.push(t,"5d86dOphthNCZcYcCy9Ww6B","LanguageManager"),Object.defineProperty(a,"__esModule",{value:!0}),o=n=a.LanguageNamspace||(a.LanguageNamspace={}),(i=o.Language||(o.Language={}))[i.English=0]="English",i[i.Chinese=1]="Chinese";var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),a=t,t.prototype.onLoad=function(){console.log(window.location.search);var e=window.location.search;if(-1!=e.indexOf("?")){for(var t="",o=e.split("?")[1].split("&"),i=0;i<=o.length-1;i++)"language"==o[i].split("=")[0]&&(t=o[i].split("=")[1]);switch(console.log(t),t){case"zh-cn":a.language=n.Language.Chinese;break;case"en":a.language=n.Language.English;break;default:a.language=n.Language.Chinese}}},t.language=n.Language.Chinese,t=a=__decorate([s],t);var a}(cc.Component));a.default=c,cc._RF.pop()},{}],LanguageSprite:[function(e,t,a){"use strict";cc._RF.push(t,"a66e8N6KI9J2I5cTYffevXt","LanguageSprite"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./LanguageManager"),o=cc._decorator,i=o.ccclass,r=o.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enSprite=null,t.cnSprite=null,t.sprite=null,t}return __extends(t,e),t.prototype.start=function(){this.sprite=this.node.getComponent(cc.Sprite),this.Set()},t.prototype.Set=function(){switch(n.default.language){case n.LanguageNamspace.Language.Chinese:this.sprite.spriteFrame=this.cnSprite;break;case n.LanguageNamspace.Language.English:this.sprite.spriteFrame=this.enSprite}},__decorate([r(cc.SpriteFrame)],t.prototype,"enSprite",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"cnSprite",void 0),t=__decorate([i],t)}(cc.Component);a.default=s,cc._RF.pop()},{"./LanguageManager":"LanguageManager"}],NodeTool:[function(e,t,a){"use strict";cc._RF.push(t,"4c95abHLgJFcp7I5uwoBz2Q","NodeTool"),Object.defineProperty(a,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Target=null,t.StartHide=!1,t}return __extends(t,e),t.prototype.start=function(){this.StartHide&&this.HideSelf()},t.prototype.HideSelf=function(){this.node.active=!1},t.prototype.DestroySelf=function(){this.node.destroy()},t.prototype.TargetSwitch=function(){this.Target.active?this.Target.active=!1:this.Target.active=!0},__decorate([i(cc.Node)],t.prototype,"Target",void 0),__decorate([i],t.prototype,"StartHide",void 0),t=__decorate([o],t)}(cc.Component);a.default=r,cc._RF.pop()},{}],PayTableControl:[function(e,t,a){"use strict";cc._RF.push(t,"a4283O7iF1B/ZEBT0M8Wu92","PayTableControl"),Object.defineProperty(a,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Target=null,t.TargetPages=new Array,t.index=0,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.AddTogglePage=function(){this.index++,this.index>this.TargetPages.length-1&&(this.index=0),this.index<0&&(this.index=this.TargetPages.length-1);for(var e=0;e<this.TargetPages.length;e++)this.TargetPages[e].active=!1;this.TargetPages[this.index].active=!0},t.prototype.SubtractTogglePage=function(){this.index--,this.index>this.TargetPages.length-1&&(this.index=0),this.index<0&&(this.index=this.TargetPages.length-1);for(var e=0;e<this.TargetPages.length;e++)this.TargetPages[e].active=!1;this.TargetPages[this.index].active=!0},t.prototype.OpenWindow=function(){this.Target.active=!0},t.prototype.CloseWindow=function(){this.Target.active=!1},__decorate([i(cc.Node)],t.prototype,"Target",void 0),__decorate([i(cc.Node)],t.prototype,"TargetPages",void 0),t=__decorate([o],t)}(cc.Component);a.default=r,cc._RF.pop()},{}],SceneManager:[function(e,t,a){"use strict";cc._RF.push(t,"2f0b1iqSV9C6ZYSbeNa9crK","SceneManager"),Object.defineProperty(a,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node)},t.prototype.start=function(){cc.sys.isMobile?cc.director.preloadScene("Main_Mobile",function(){cc.director.loadScene("Main_Mobile")}):cc.director.preloadScene("Main_PC",function(){cc.director.loadScene("Main_PC")})},t=__decorate([o],t)}(cc.Component));a.default=i,cc._RF.pop()},{}],State:[function(e,t,a){"use strict";var n,o,i,r,s,c;cc._RF.push(t,"628c3OwzpNC77ulluhULMz4","State"),Object.defineProperty(a,"__esModule",{value:!0}),o=n=a.StateEnum||(a.StateEnum={}),(i=o.Main||(o.Main={}))[i.Bm=0]="Bm",i[i.Demo=1]="Demo",i[i.GameIdle=2]="GameIdle",i[i.GameFreeGame=3]="GameFreeGame",i[i.GameHelp=4]="GameHelp",i[i.GameCashOut=5]="GameCashOut",i[i.GameRun=6]="GameRun",i[i.Error=7]="Error",(r=o.GameType||(o.GameType={}))[r.Notwin=0]="Notwin",r[r.Normal=1]="Normal",r[r.FreeGame=2]="FreeGame",r[r.Pass=3]="Pass",(s=o.GameMode||(o.GameMode={}))[s.Spin=0]="Spin",s[s.Auto=1]="Auto",s[s.Fast=2]="Fast",(c=o.GameRun||(o.GameRun={}))[c.Idle=0]="Idle",c[c.StartRotate=1]="StartRotate",c[c.WaitingTopo=2]="WaitingTopo",c[c.SettingTopo=3]="SettingTopo",c[c.WaitingRotate=4]="WaitingRotate",c[c.FreeGame=5]="FreeGame",c[c.ShowWin=6]="ShowWin",c[c.BigWin=7]="BigWin",c[c.GetWin=8]="GetWin",c[c.Help=9]="Help",c[c.Demo=10]="Demo";var u=function(){function e(){}return Object.defineProperty(e.prototype,"CurrentMain",{get:function(){return this.mCurrentMain},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurrentGameType",{get:function(){return this.mCurrentGameType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurrentGameMod",{get:function(){return this.mCurrentGameMod},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurrentGameRun",{get:function(){return this.mCurrentGameRun},enumerable:!0,configurable:!0}),e.prototype.StateInint=function(){this.SetCurrentMain(n.Main.GameIdle),this.SetCurrentGameType(n.GameType.Notwin),this.SetCurrentGameMode(n.GameMode.Spin),this.SetCurrentGameRun(n.GameRun.Idle)},e.prototype.SetCurrentMain=function(e){this.mCurrentMain=e},e.prototype.SetCurrentGameType=function(e){this.mCurrentGameType=e},e.prototype.SetCurrentGameMode=function(e){this.mCurrentGameMod=e},e.prototype.SetCurrentGameRun=function(e){this.mCurrentGameRun=e},e}();a.default=u,cc._RF.pop()},{}],Tools:[function(e,t,a){"use strict";cc._RF.push(t,"7b8a3W7fqNFG6Oz2p/c6w4/","Tools"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){}return e.RandomRange=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.delay=function(e){return new Promise(function(t,a){setTimeout(t,e)})},e.shuffle=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},e.milliFormat=function(e){return e&&e.toString().replace(/(^|\s)\d+/g,function(e){return e.replace(/(?=(?!\b)(\d{3})+$)/g,",")})},e}();a.default=n,cc._RF.pop()},{}],Topo:[function(e,t,a){"use strict";cc._RF.push(t,"fa952VbPuhEzIsXnlbLGFPy","Topo"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./State"),o=cc._decorator,i=o.ccclass,r=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Win=0,t.WinCount=new Array,t.LineWin=new Array,t.WinSymbol=new Array,t.TopoMain=new Array,t.FillSymbol=new Array,t.FillPos=new Array,t.ClearPos=new Array,t.Type=n.StateEnum.GameType.Notwin,t.isFreeGame=!1,t.freegameCount=0,t}return __extends(t,e),t=__decorate([i],t)}(cc.Component));a.default=r,cc._RF.pop()},{"./State":"State"}],UIManager:[function(e,t,a){"use strict";cc._RF.push(t,"c77e1IF02lBB7j9UEPbQ8pA","UIManager"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./Tools/Tools"),o=e("./Language/LanguageManager"),i=e("./State"),r=e("./GameData"),s=e("./Audio/AudioPlayer"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playManager=null,t.autoOn=new Array,t.autoOff=new Array,t.fastOn=new Array,t.ENAutoOn=new Array,t.ENAutoOff=new Array,t.ENFastOn=new Array,t.round=null,t.winText=null,t.chipText=null,t.winCountText=null,t.raitoText=null,t.betText=null,t.betMultiplierText=null,t.lineWin=null,t.UIShowWinSymbol=null,t.UISpin=null,t.UIautoSpin=null,t.UIfastSpin=null,t.UIAddBet=null,t.UILessBet=null,t.buttom=null,t.win=0,t.isRunWin=!1,t.isBreakRunWin=!1,t}return __extends(t,e),t.prototype.SetRound=function(e){this.round.string=e},t.prototype.SetRaito=function(){this.raitoText.string="1:"+r.default.Raito},t.prototype.SetAddBet=function(){this.playManager.state.CurrentMain==i.StateEnum.Main.GameIdle&&(this.playManager.gameData.AddBet(),this.betText.string=""+this.playManager.gameData.TotalBet,this.betMultiplierText.string="X"+this.playManager.gameData.BetMultiplier,this.buttom.play())},t.prototype.SetLessBet=function(){this.playManager.state.CurrentMain==i.StateEnum.Main.GameIdle&&(this.playManager.gameData.LessBet(),this.betText.string=""+this.playManager.gameData.TotalBet,this.betMultiplierText.string="X"+this.playManager.gameData.BetMultiplier,this.buttom.play())},t.prototype.SetChips=function(e){this.playManager.gameData.SetChip(e),this.chipText.string=n.default.milliFormat(this.playManager.gameData.Chips)},t.prototype.SetWin=function(e){this.win=e,this.winText.string=n.default.milliFormat(e)},t.prototype.SetUIAuto=function(e){if(e)switch(o.default.language){case o.LanguageNamspace.Language.Chinese:this.UIautoSpin.getComponent(cc.Button).normalSprite=this.autoOff[0],this.UIautoSpin.getComponent(cc.Button).pressedSprite=this.autoOff[1],this.UIautoSpin.getComponent(cc.Button).hoverSprite=this.autoOff[2],this.UIautoSpin.getComponent(cc.Button).disabledSprite=this.autoOff[3];break;case o.LanguageNamspace.Language.English:this.UIautoSpin.getComponent(cc.Button).normalSprite=this.ENAutoOff[0],this.UIautoSpin.getComponent(cc.Button).pressedSprite=this.ENAutoOff[1],this.UIautoSpin.getComponent(cc.Button).hoverSprite=this.ENAutoOff[2],this.UIautoSpin.getComponent(cc.Button).disabledSprite=this.ENAutoOff[3]}else switch(o.default.language){case o.LanguageNamspace.Language.Chinese:this.UIautoSpin.getComponent(cc.Button).normalSprite=this.autoOn[0],this.UIautoSpin.getComponent(cc.Button).pressedSprite=this.autoOn[1],this.UIautoSpin.getComponent(cc.Button).hoverSprite=this.autoOn[2],this.UIautoSpin.getComponent(cc.Button).disabledSprite=this.autoOn[3];break;case o.LanguageNamspace.Language.English:this.UIautoSpin.getComponent(cc.Button).normalSprite=this.ENAutoOn[0],this.UIautoSpin.getComponent(cc.Button).pressedSprite=this.ENAutoOn[1],this.UIautoSpin.getComponent(cc.Button).hoverSprite=this.ENAutoOn[2],this.UIautoSpin.getComponent(cc.Button).disabledSprite=this.ENAutoOn[3]}},t.prototype.SetUIFast=function(e){if(e)switch(o.default.language){case o.LanguageNamspace.Language.Chinese:this.UIfastSpin.getComponent(cc.Button).normalSprite=this.autoOff[0],this.UIfastSpin.getComponent(cc.Button).pressedSprite=this.autoOff[1],this.UIfastSpin.getComponent(cc.Button).hoverSprite=this.autoOff[2],this.UIfastSpin.getComponent(cc.Button).disabledSprite=this.autoOff[3];break;case o.LanguageNamspace.Language.English:this.UIfastSpin.getComponent(cc.Button).normalSprite=this.ENAutoOff[0],this.UIfastSpin.getComponent(cc.Button).pressedSprite=this.ENAutoOff[1],this.UIfastSpin.getComponent(cc.Button).hoverSprite=this.ENAutoOff[2],this.UIfastSpin.getComponent(cc.Button).disabledSprite=this.ENAutoOff[3]}else switch(o.default.language){case o.LanguageNamspace.Language.Chinese:this.UIfastSpin.getComponent(cc.Button).normalSprite=this.fastOn[0],this.UIfastSpin.getComponent(cc.Button).pressedSprite=this.fastOn[1],this.UIfastSpin.getComponent(cc.Button).hoverSprite=this.fastOn[2],this.UIfastSpin.getComponent(cc.Button).disabledSprite=this.fastOn[3];break;case o.LanguageNamspace.Language.English:this.UIfastSpin.getComponent(cc.Button).normalSprite=this.ENFastOn[0],this.UIfastSpin.getComponent(cc.Button).pressedSprite=this.ENFastOn[1],this.UIfastSpin.getComponent(cc.Button).hoverSprite=this.ENFastOn[2],this.UIfastSpin.getComponent(cc.Button).disabledSprite=this.ENFastOn[3]}},t.prototype.WinRunStart=function(){this.isRunWin?this.isRunWin=!1:this.isRunWin=!0},t.prototype.WinRunBreak=function(){this.isBreakRunWin=!0},__decorate([l(cc.SpriteFrame)],t.prototype,"autoOn",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"autoOff",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"fastOn",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"ENAutoOn",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"ENAutoOff",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"ENFastOn",void 0),__decorate([l(cc.Label)],t.prototype,"round",void 0),__decorate([l(cc.Label)],t.prototype,"winText",void 0),__decorate([l(cc.Label)],t.prototype,"chipText",void 0),__decorate([l(cc.Label)],t.prototype,"winCountText",void 0),__decorate([l(cc.Label)],t.prototype,"raitoText",void 0),__decorate([l(cc.Label)],t.prototype,"betText",void 0),__decorate([l(cc.Label)],t.prototype,"betMultiplierText",void 0),__decorate([l(cc.Label)],t.prototype,"lineWin",void 0),__decorate([l(cc.Sprite)],t.prototype,"UIShowWinSymbol",void 0),__decorate([l(cc.Sprite)],t.prototype,"UISpin",void 0),__decorate([l(cc.Sprite)],t.prototype,"UIautoSpin",void 0),__decorate([l(cc.Sprite)],t.prototype,"UIfastSpin",void 0),__decorate([l(cc.Sprite)],t.prototype,"UIAddBet",void 0),__decorate([l(cc.Sprite)],t.prototype,"UILessBet",void 0),__decorate([l(s.default)],t.prototype,"buttom",void 0),t=__decorate([u],t)}(cc.Component);a.default=p,cc._RF.pop()},{"./Audio/AudioPlayer":"AudioPlayer","./GameData":"GameData","./Language/LanguageManager":"LanguageManager","./State":"State","./Tools/Tools":"Tools"}]},{},["AudioManager","AudioPlayer","BrowserManager","FullScreenTS","Candy","CandyManager","CandyPlayManager","FreeGameManager","GameData","LanguageButtom","LanguageManager","LanguageSprite","PayTableControl","SceneManager","State","NodeTool","Tools","Topo","UIManager"]);